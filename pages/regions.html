<div id="regions">
    <table style="width: 100%;">
        <tr>
            <td style="text-align: left"><span data-bind="text: Regions().length"></span> Region(s)</td>
            <td>Name:<input placeholder="Search..." type="search" name="q" data-bind="value: regionSearch, valueUpdate: 'input'" autocomplete="off"></td>
            <td>Estate:<select data-bind="options: regionsEstateFilters, value: selectedRegionEstateFilter"></select></td>
            <td>Status:<select data-bind="options: regionsStatusFilters, value: selectedRegionStatusFilter"></select></td>
            <td>Host:<select data-bind="options: regionsHostFilters, value: selectedRegionHostFilter, visible: auth.activeUser().AccessLevel() > 249"></select></td>
            <td style="text-align: right" data-bind="visible: auth.activeUser().AccessLevel() > 249">
                <button data-bind="click: $root.startListedRegions">Start Listed</button>
                <button data-bind="click: $root.stopListedRegions">Stop Listed</button>
                <button data-bind="click: $root.createNewRegion">Add Region</button>
            </td>
        </tr>
    </table>
    
    <div style="width:100%; overflow: auto;">
        <span style="float: left; width: 10em">Name</span>
        <span style="float: left; width: 10em">Estate</span>
        <span style="float: left; width: 10em">Timestamp</span>
        <div style="float: left; width: 52%">
            <span style="float: left; width: 10em">CPU</span>
            <span style="float: left; width: 15em">MEM</span>
            <span style="float: left; width: 15em">Uptime</span>
            <span style="float: left; width: 10em">Users</span>
            <span style="float: left; width: 10em" ng-if="auth.activeUser.accessLevel > 249">Host</span>
        </div>
        <span style="float: left; width: 5%" data-bind="visible: auth.activeUser().AccessLevel() > 249">Host</span>

    </div>
    <div style="width:100%;" data-bind="template: {name: 'region-template', foreach: Regions }, stripe: Regions, evenClass: 'light', oddClass: 'dark'">
        <div ng-repeat="region in regions track by region.uuid" ng-class-odd="'odd'" ng-class-even="'even'">
            <div style="overflow: auto;">
                <div style="float: left; width: 10em">
                    <span>{{region.name}}</span>
                    <button title="logbutton" data-bind="click: dumpLogs, tooltip: {content: 'Download available logs'}" style="float: right;">log</button>
                </div>
                <div ng-if="region.isRunning == true">
                    <div style="float: left; width: 10em">
                        <span>{{region.estateName}}</span>
                    </div>
                    <div style="float: left; width: 10em">
                        <span>{{lastSeen(region.stat.timestamp)}}</span>
                    </div>
                    <div style="float: left; width: 10em">
                        <span>{{region.stat.status["cpuPercent"].toFixed(2)}}%</span>
                    </div>
                    <div style="float: left; width: 7em">
                        <span>{{region.stat.status["memPercent"].toFixed(2)}} %</span>
                    </div>
                    <div style="float: left; width: 8em">
                        <span>{{(region.stat.status["memKB"]/1024).toFixed(2)}} MB</span>
                    </div>
                    <div style="float: left; width: 15em">
                        <span>{{region.stat.status.simStats['Uptime'].split(".").slice(0,-1).join(" days ")}}</span>
                    </div>
                    <div style="float: left; width: 10em">
                        <span>{{region.stat.status.simStats['RootAg']}}</span>
                    </div>
                    <div style="float: left; width: 10em">
                        <span ng-if="auth.activeUser.accessLevel > 249">{{hostInfo(region.node)}}</span>
                    </div>
                </div>
                <div ng-if="region.isRunning != true">
                    <div style="float: left; width: 80em">
                        Is not running...
                    </div> 
                </div>
                <div style="float: left; width: 20em">
                    <button>Start</button>
                    <button>Stop</button>
                    <button>Content</button>
                    <button>Manage</button>
                </div>
            </div>
        </div>
    </div>
</div>
